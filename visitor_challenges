#1/bin/bash

function xyz {
	while read -a line; do
		search "visit id: ${line[1]}" "$1"/challenges/*.chg 
	done 
}

function zyx {
	while read -a file; do
		wol="Loser"		
		while read line; do
			tmp=${line[0]}	
			if [[ $tmp == "overall time:"* ]]; then 
				if (( `echo ${tmp[0]} | cut -d" " -f3` < "$1" )); then
					wol="Winner"
				fi	
			fi
		done < ${file[0]}
		echo ${file[6]} $wol
	done
}

visitor_for_room "$1" "$2" | xyz "$1" | zyx "$3"
